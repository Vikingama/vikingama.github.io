<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='快两年没碰 Vue 了，这还面试个屁呀，摔'><title>Vue 2.x 复习总结 · Stay Hungry · Stay Foolish</title>
<link rel=canonical href=https://vikingama.github.io/p/vue-2.x-%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93/><link rel=stylesheet href=/scss/style.min.38c15d3a5c1bca30008bb625a46636d24f5deb4bf3217095e667a3abc843eaef.css><meta property='og:title' content='Vue 2.x 复习总结'><meta property='og:description' content='快两年没碰 Vue 了，这还面试个屁呀，摔'><meta property='og:url' content='https://vikingama.github.io/p/vue-2.x-%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93/'><meta property='og:site_name' content='馬腊咯稽'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2020-03-04T00:00:00+00:00'><meta property='article:modified_time' content='2020-03-04T00:00:00+00:00'><meta property='og:image' content='https://vikingama.github.io/img/cover/vue.png'><meta name=twitter:title content="Vue 2.x 复习总结"><meta name=twitter:description content="快两年没碰 Vue 了，这还面试个屁呀，摔"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://vikingama.github.io/img/cover/vue.png'><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><meta name=theme-color content="#ffffff"><meta name=robots content="noarchive"><div class=warning-banner>因为 GitHub 账号二次验证失败，计划迁往
<a href=https://elementref.github.io/>新地址&rarr;</a></div></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_huae06eac29c2bc6aa7e83a685ea2f6536_13838_300x0_resize_box_3.png width=300 height=404 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>馬腊咯稽</a></h1><h2 class=site-description>Stay Hungry · Stay Foolish</h2></div></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>首页</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=https://github.com/ElementRef/AboutConfig target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.828 9.172a4 4 0 100 5.656A10 10 0 0012 12a10 10 0 012.172-2.828 4 4 0 110 5.656A10 10 0 0112 12 10 10 0 009.828 9.172"/></svg>
<span>配置</span></a></li><li><a href=/%E5%90%AF%E5%8F%91/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>启发</span></a></li><li><a href=/%E5%91%BD%E4%BB%A4/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-terminal" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 7l5 5-5 5"/><line x1="12" y1="19" x2="19" y2="19"/></svg>
<span>命令</span></a></li><li><a href=/%E5%85%B3%E4%BA%8E/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>深色</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/vue-2.x-%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93/><img src=/img/cover/vue.png loading=lazy alt="Vue 2.x 复习总结"></a></div><div class=article-details><header class=article-category><a href=/categories/vue/>Vue</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/vue-2.x-%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93/>Vue 2.x 复习总结</a></h2><h3 class=article-subtitle>快两年没碰 Vue 了，这还面试个屁呀，摔</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Mar 04, 2020</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长：12 分钟</time></div></footer></div></header><section class=article-content><h2 id=生命周期>生命周期</h2><p><img src=/p/vue-2.x-%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93/lifecycle.png width=1200 height=3039 srcset="/p/vue-2.x-%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93/lifecycle_huc96c6b4af5dabdec16ddf54b951af939_58927_480x0_resize_box_3.png 480w, /p/vue-2.x-%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93/lifecycle_huc96c6b4af5dabdec16ddf54b951af939_58927_1024x0_resize_box_3.png 1024w" class=gallery-image data-flex-grow=39 data-flex-basis=94px loading=lazy></p><h2 id=异步组件>异步组件</h2><p>Vue 允许你以一个工厂函数的方式定义你的组件，这个工厂函数会异步解析你的组件定义；只有在这个组件需要被渲染的时候才会触发该工厂函数，且会把结果缓存起来供未来重渲染。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>AsyncComponent</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 需要加载的组件 (应该是一个 Promise 对象)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>component</span><span class=o>:</span> <span class=kr>import</span><span class=p>(</span><span class=s1>&#39;./MyComponent.vue&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 异步组件加载时使用的组件
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>loading</span><span class=o>:</span> <span class=nx>LoadingComponent</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 加载失败时使用的组件
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>error</span><span class=o>:</span> <span class=nx>ErrorComponent</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 展示加载时组件的延时时间。默认值是 200 (毫秒)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>delay</span><span class=o>:</span> <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 如果提供了超时时间且组件加载也超时了，则使用加载失败时使用的组件。默认值是：`Infinity`
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>timeout</span><span class=o>:</span> <span class=mi>3000</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=插件系统>插件系统</h2><p>插件通常用来为 Vue 添加全局功能。插件的功能范围没有严格的限制：</p><ol><li>添加全局方法或者属性；</li><li>添加全局资源：指令/过滤器/过渡等；</li><li>通过全局混入来添加一些组件选项；</li><li>添加 Vue 实例方法，通过把它们添加到 Vue.prototype 上实现；</li><li>提供自己的 API，同时提供上面提到的一个或多个功能。</li></ol><p>举个例子：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>Example</span><span class=p>.</span><span class=nx>install</span> <span class=o>=</span> <span class=p>(</span><span class=nx>Vue</span><span class=p>,</span> <span class=nx>options</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Vue</span><span class=p>.</span><span class=nx>$shareConfig</span> <span class=o>=</span> <span class=nx>configObj</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>sharetitle</span><span class=p>,</span> <span class=nx>sharedesc</span><span class=p>,</span> <span class=nx>shareimg</span><span class=p>,</span> <span class=nx>shareurl</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>configObj</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>shareObj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>title</span><span class=o>:</span> <span class=nx>sharetitle</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>desc</span><span class=o>:</span> <span class=nx>sharedesc</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>link</span><span class=o>:</span> <span class=nx>shareurl</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>imgUrl</span><span class=o>:</span> <span class=nx>shareimg</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>success</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>      <span class=nx>cancel</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=nx>wx</span><span class=p>.</span><span class=nx>config</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>appId</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>$store</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>appId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>debug</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>jsApiList</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;onMenuShareTimeline&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;onMenuShareAppMessage&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;onMenuShareQQ&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;onMenuShareWeibo&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>nonceStr</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>$store</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>nonceStr</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>signature</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>$store</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>signature</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>timestamp</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>$store</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>timestamp</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>wx</span><span class=p>.</span><span class=nx>ready</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>wx</span><span class=p>.</span><span class=nx>onMenuShareTimeline</span><span class=p>(</span><span class=nx>shareObj</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>wx</span><span class=p>.</span><span class=nx>onMenuShareQQ</span><span class=p>(</span><span class=nx>shareObj</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>wx</span><span class=p>.</span><span class=nx>onMenuShareAppMessage</span><span class=p>(</span><span class=nx>shareObj</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>wx</span><span class=p>.</span><span class=nx>onMenuShareWeibo</span><span class=p>(</span><span class=nx>shareObj</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=c1>// 使用插件并向插件传入可选选项
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Vue</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>Example</span><span class=p>,</span> <span class=p>{});</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=自定义指令>自定义指令</h2><p>自定义指令适用于需要对普通 DOM 元素进行底层操作的情况。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// 全局注册
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Vue</span><span class=p>.</span><span class=nx>directive</span><span class=p>(</span><span class=s1>&#39;focus&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 当被绑定的元素插入到 DOM 中时
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>inserted</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>el</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>el</span><span class=p>.</span><span class=nx>focus</span><span class=p>();</span> <span class=c1>// 聚焦元素
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// 局部注册
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>directives</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>focus</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>inserted</span><span class=p>(</span><span class=nx>el</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>el</span><span class=p>.</span><span class=nx>focus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>指令定义对象可以提供如下几个钩子函数：</p><ul><li>bind：只调用一次，指令第一次绑定到元素时调用；在这里可以进行一次性的初始化设置；</li><li>inserted：被绑定元素插入父节点时调用（仅保证父节点存在，但不一定已被插入文档中）；</li><li>update：所在组件的 VNode 更新时调用，可以通过比较更新前后的值来忽略不必要的模板更新；</li><li>componentUpdated：指令所在组件的 VNode 及其子 VNode 全部更新后调用；</li><li>unbind：只调用一次，指令与元素解绑时调用。</li></ul><p>钩子函数参数：</p><ul><li>el：指令所绑定的元素，可以用来直接操作 DOM；</li><li>binding：一个对象，包含以下属性：<ul><li>name：指令名，不包括 v- 前缀；</li><li>value：指令的绑定值，例如：v-my=&ldquo;1 + 1"中，绑定值为 2；</li><li>oldValue：指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用；</li><li>expression：字符串形式的指令表达式，例如 v-my=&ldquo;1 + 1"中，表达式为 &ldquo;1 + 1&rdquo;；</li><li>arg：传给指令的参数，可选；例如 v-my:foo 中，参数为 &ldquo;foo&rdquo;；</li><li>modifiers：一个包含修饰符的对象；例如：v-my.foo.bar 中，修饰符对象为 { foo: true, bar: true }。</li></ul></li><li>vnode：编译生成的虚拟节点；</li><li>oldVnode：上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。</li></ul><p>举个例子：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;hook-arguments&#34;</span> <span class=na>v-demo:foo</span><span class=err>.</span><span class=na>a</span><span class=err>.</span><span class=na>b</span><span class=o>=</span><span class=s>&#34;message&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>Vue</span><span class=p>.</span><span class=nx>directive</span><span class=p>(</span><span class=s1>&#39;demo&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>bind</span><span class=p>(</span><span class=nx>el</span><span class=p>,</span> <span class=nx>binding</span><span class=p>,</span> <span class=nx>vnode</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nx>el</span><span class=p>.</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>            name: </span><span class=si>${</span><span class=nx>s</span><span class=p>(</span><span class=nx>binding</span><span class=p>.</span><span class=nx>name</span><span class=p>)</span><span class=si>}</span><span class=sb>,
</span></span></span><span class=line><span class=cl><span class=sb>            value: </span><span class=si>${</span><span class=nx>s</span><span class=p>(</span><span class=nx>binding</span><span class=p>.</span><span class=nx>value</span><span class=p>)</span><span class=si>}</span><span class=sb>,
</span></span></span><span class=line><span class=cl><span class=sb>            expression: </span><span class=si>${</span><span class=nx>s</span><span class=p>(</span><span class=nx>binding</span><span class=p>.</span><span class=nx>expression</span><span class=p>)</span><span class=si>}</span><span class=sb>,
</span></span></span><span class=line><span class=cl><span class=sb>            argument: </span><span class=si>${</span><span class=nx>s</span><span class=p>(</span><span class=nx>binding</span><span class=p>.</span><span class=nx>arg</span><span class=p>)</span><span class=si>}</span><span class=sb>,
</span></span></span><span class=line><span class=cl><span class=sb>            modifiers: </span><span class=si>${</span><span class=nx>s</span><span class=p>(</span><span class=nx>binding</span><span class=p>.</span><span class=nx>modifiers</span><span class=p>)</span><span class=si>}</span><span class=sb>,
</span></span></span><span class=line><span class=cl><span class=sb>            vnode keys: </span><span class=si>${</span><span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>vnode</span><span class=p>).</span><span class=nx>join</span><span class=p>(</span><span class=s1>&#39;, &#39;</span><span class=p>)</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>            `</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;#hook-arguments&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;hello&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>   * name: &#34;demo&#34;
</span></span></span><span class=line><span class=cl><span class=cm>   * value: &#34;hello&#34;
</span></span></span><span class=line><span class=cl><span class=cm>   * expression: &#34;message&#34;
</span></span></span><span class=line><span class=cl><span class=cm>   * argument: &#34;foo&#34;
</span></span></span><span class=line><span class=cl><span class=cm>   * modifiers: {&#34;a&#34;:true,&#34;b&#34;:true}
</span></span></span><span class=line><span class=cl><span class=cm>   * vnode keys: tag, data, children, text...
</span></span></span><span class=line><span class=cl><span class=cm>   */</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>动态指令：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;dynamic&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>h3</span><span class=p>&gt;</span>Scroll down inside this section...<span class=p>&lt;/</span><span class=nt>h3</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span> <span class=na>v-pin:</span><span class=err>[</span><span class=na>direction</span><span class=err>]=&#34;</span><span class=na>200</span><span class=err>&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    I am pinned onto the page at 200px to the left...
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;#dynamic&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>direction</span><span class=o>:</span> <span class=s1>&#39;left&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>directives</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>pin</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>bind</span><span class=p>(</span><span class=nx>el</span><span class=p>,</span> <span class=nx>binding</span><span class=p>,</span> <span class=nx>vnode</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>el</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>position</span> <span class=o>=</span> <span class=s1>&#39;fixed&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=nx>el</span><span class=p>.</span><span class=nx>style</span><span class=p>[</span><span class=nx>binding</span><span class=p>.</span><span class=nx>arg</span><span class=p>]</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=nx>binding</span><span class=p>.</span><span class=nx>value</span><span class=si>}</span><span class=sb>px`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=响应式原理>响应式原理</h2><p>当把一个普通的 JS 对象传入 Vue 实例作为 data 选项，Vue 将遍历此对象所有的属性，并使用 Object.defineProperty 把这些属性全部转为 getter/setter；在内部它们让 Vue 能够追踪依赖，在属性被访问和修改时通知变更；每个组件实例都对应一个 watcher 实例，它会在组件渲染的过程中把“接触”过的数据属性记录为依赖；之后当依赖项的 setter 触发时，会通知 watcher，从而使它关联的组件重新渲染。</p><p>Object.freeze 会阻止修改现有的属性，也意味着响应系统无法再追踪变化。</p><p>Vue 不能检测以下数组的变动（因为性能问题）：</p><ul><li>利用索引直接设置一个数组项时，例如：vm.items[indexOfItem] = newValue；</li><li>修改数组的长度时，例如：vm.items.length = newLength。</li></ul><p>举个例子：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>vm</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>items</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>vm</span><span class=p>.</span><span class=nx>items</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;x&#39;</span><span class=p>;</span> <span class=c1>// 不是响应性的
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>vm</span><span class=p>.</span><span class=nx>$set</span><span class=p>(</span><span class=nx>vm</span><span class=p>.</span><span class=nx>items</span><span class=p>,</span> <span class=nx>indexOfItem</span><span class=p>,</span> <span class=nx>newValue</span><span class=p>);</span> <span class=c1>// 解决问题
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>vm</span><span class=p>.</span><span class=nx>items</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>indexOfItem</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>newValue</span><span class=p>);</span> <span class=c1>// 解决问题
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>vm</span><span class=p>.</span><span class=nx>items</span><span class=p>.</span><span class=nx>length</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=c1>// 不是响应性的
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>vm</span><span class=p>.</span><span class=nx>items</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>newLength</span><span class=p>);</span> <span class=c1>// 解决问题
</span></span></span></code></pre></td></tr></table></div></div><p>Vue 不能检测对象属性的添加或删除：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>vm</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>a</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>userProfile</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Anika&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// 对于已经创建的实例，Vue 不允许动态添加根级别的响应式属性
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>vm</span><span class=p>.</span><span class=nx>b</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span> <span class=c1>// vm.b 不是响应式的
</span></span></span><span class=line><span class=cl><span class=c1>// 可以向嵌套对象添加响应式属性
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>vm</span><span class=p>.</span><span class=nx>$set</span><span class=p>(</span><span class=nx>vm</span><span class=p>.</span><span class=nx>userProfile</span><span class=p>,</span> <span class=s1>&#39;age&#39;</span><span class=p>,</span> <span class=mi>27</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>vm</span><span class=p>.</span><span class=nx>userProfile</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>assign</span><span class=p>({},</span> <span class=nx>vm</span><span class=p>.</span><span class=nx>userProfile</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>favoriteColor</span><span class=o>:</span> <span class=s1>&#39;Green&#39;</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>Vue 在更新 DOM 时是异步执行的；只要侦听到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据变更；如果同一个 watcher 被多次触发，只会被推入到队列中一次；然后，在下一个的事件循环“tick”中，Vue 刷新队列并执行实际 (已去重的) 工作。</p><p>在内部对异步队列尝试使用原生的 Promise.then、MutationObserver 和 setImmediate，如果执行环境不支持，则会采用 setTimeout(fn, 0) 代替。</p><p>可以在数据变化之后立即使用 Vue.nextTick(callback)；回调函数将在 DOM 更新完成后被调用；例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>vm</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;#example&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;123&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>vm</span><span class=p>.</span><span class=nx>message</span> <span class=o>=</span> <span class=s1>&#39;new message&#39;</span><span class=p>;</span> <span class=c1>// 更改数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>vm</span><span class=p>.</span><span class=nx>$el</span><span class=p>.</span><span class=nx>textContent</span> <span class=o>===</span> <span class=s1>&#39;new message&#39;</span><span class=p>;</span> <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>vw</span><span class=p>.</span><span class=nx>$nextTick</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>vm</span><span class=p>.</span><span class=nx>$el</span><span class=p>.</span><span class=nx>textContent</span> <span class=o>===</span> <span class=s1>&#39;new message&#39;</span><span class=p>;</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=依赖注入>依赖注入</h2><p>Vue 中也有 context 机制：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>google-map</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>google-map-region</span> <span class=na>v-bind:shape</span><span class=o>=</span><span class=s>&#34;cityBoundaries&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>google-map-markers</span> <span class=na>v-bind:places</span><span class=o>=</span><span class=s>&#34;iceCreamShops&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>google-map-markers</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>google-map-region</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>google-map</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>Vue</span><span class=p>.</span><span class=nx>component</span><span class=p>(</span><span class=s1>&#39;google-map&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>sigma</span><span class=o>:</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>provide</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>sigma</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>sigma</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>getMap</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>getMap</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>getMap</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=nx>Vue</span><span class=p>.</span><span class=nx>component</span><span class=p>(</span><span class=s1>&#39;google-map-markers&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 可以跨越多个层级拿到值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>inject</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;sigma&#39;</span><span class=p>,</span> <span class=s1>&#39;getMap&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=事件监听器>事件监听器</h2><ul><li>通过 $on(eventName, eventHandler) 侦听一个事件</li><li>通过 $once(eventName, eventHandler) 一次性侦听一个事件</li><li>通过 $off(eventName, eventHandler) 停止侦听一个事件</li></ul><p>举个例子：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>mounted</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>picker</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Pikaday</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>field</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>$refs</span><span class=p>.</span><span class=nx>input</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>format</span><span class=o>:</span> <span class=s1>&#39;YYYY-MM-DD&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>beforeDestroy</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>picker</span><span class=p>.</span><span class=nx>destroy</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// 可以修改为
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>mounted</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>picker</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Pikaday</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>field</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>$refs</span><span class=p>.</span><span class=nx>input</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>format</span><span class=o>:</span> <span class=s1>&#39;YYYY-MM-DD&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>$once</span><span class=p>(</span><span class=s1>&#39;hook:beforeDestroy&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>picker</span><span class=p>.</span><span class=nx>destroy</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=混入>混入</h2><p>混入提供了一种非常灵活的方式，来分发 Vue 组件中的可复用功能；一个混入对象可以包含任意组件选项；当组件使用混入对象时，所有混入对象的选项将被“混合”进入该组件本身的选项。</p><p>混入原则：</p><ul><li>数据对象在内部会进行递归合并，并在发生冲突时以『组件数据优先』；</li><li>同名钩子函数将合并为一个数组，因此都将被调用；『混入对象』的钩子将在『组件自身』钩子『之前』调用；</li><li>值为对象的选项，例如 methods、components 和 directives，将被合并为同一个对象；『组件对象』优先级较高。</li></ul><p>Vue.extend 也使用同样的合并策略。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>myMixin</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;hello&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>foo</span><span class=o>:</span> <span class=s1>&#39;abc&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>hi</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;hi&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>bye</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;bye&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>mounted</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;mixin mounted&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>vm</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>mixins</span><span class=o>:</span> <span class=p>[</span><span class=nx>myMixin</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>message</span><span class=o>:</span> <span class=s2>&#34;it&#39;s me&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>bar</span><span class=o>:</span> <span class=s1>&#39;def&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>hi</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;hihihi&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=k>do</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;dododo&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>created</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>$data</span><span class=p>);</span> <span class=c1>// { message: &#34;it&#39;s me&#34;, foo: &#34;abc&#34;, bar: &#34;def&#34; }
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>mounted</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;component mounted&#39;</span><span class=p>);</span> <span class=c1>// mixin mounted, component mounted
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>vm</span><span class=p>.</span><span class=nx>hi</span><span class=p>();</span> <span class=c1>// hihihi
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>vm</span><span class=p>.</span><span class=nx>bye</span><span class=p>();</span> <span class=c1>// bye
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>vm</span><span class=p>.</span><span class=k>do</span><span class=p>();</span> <span class=c1>// dododo
</span></span></span><span class=line><span class=cl><span class=c1>// 全局混入，将影响每一个之后创建的 Vue 实例
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Vue</span><span class=p>.</span><span class=nx>mixin</span><span class=p>(</span><span class=nx>myMixin</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=computed-vs-watch-vs-methods>computed vs watch vs methods</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>{v1()}<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>{v2}<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>{v3}<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// data 选项必须是一个函数，每个实例可以维护一份被返回对象的独立的拷贝
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>value</span><span class=o>:</span> <span class=mi>123</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>v3</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 每当触发重新渲染时，方法将总会再次执行；无论 vm.value 是否变化
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>v1</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sb>`v1: </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>value</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>computed</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 计算属性是基于响应式依赖进行缓存的，只在相关响应式依赖发生改变时它们才会重新求值
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>v2</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sb>`v2: </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>value</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>watch</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 在相关数据变化时，执行异步或开销较大的副作用有点像 React.useEffect
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>v3</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>v3</span> <span class=o>=</span> <span class=sb>`v3: </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>value</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=v-model>v-model</h2><p>v-model 本质上是语法糖；它负责监听用户的输入事件以更新数据，并对一些极端场景进行一些特殊处理；在内部为不同的输入元素使用不同的属性并抛出不同的事件：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>v-model</span><span class=o>=</span><span class=s>&#34;searchText&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>等价于
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span>
</span></span><span class=line><span class=cl>  <span class=na>v-bind:value</span><span class=o>=</span><span class=s>&#34;searchText&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>v-on:input</span><span class=o>=</span><span class=s>&#34;searchText = $event.target.value&#34;</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>text 和 textarea 使用 value 属性和 input 事件；</li><li>checkbox 和 radio 使用 checked 属性和 change 事件；</li><li>select 字段将 value 作为 prop 并将 change 作为事件。</li></ul><p>v-model 有配套的修饰符：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- 使用 change 事件替换 input 事件将输入框的值与数据进行同步 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>v-model</span><span class=err>.</span><span class=na>lazy</span><span class=o>=</span><span class=s>&#34;msg&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 将用户的输入值转为数值类型 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>v-model</span><span class=err>.</span><span class=na>number</span><span class=o>=</span><span class=s>&#34;age&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;number&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 过滤用户输入的首尾空白字符 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>v-model</span><span class=err>.</span><span class=na>trim</span><span class=o>=</span><span class=s>&#34;msg&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>一个组件上的 v-model 默认会利用名为 value 的 prop 和名为 input 的事件；但是像单选框、复选框等类型的输入控件可能会将 value attribute 用于不同的目的。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>Vue</span><span class=p>.</span><span class=nx>component</span><span class=p>(</span><span class=s1>&#39;base-checkbox&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>model</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>prop</span><span class=o>:</span> <span class=s1>&#39;checked&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>event</span><span class=o>:</span> <span class=s1>&#39;change&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>checked</span><span class=o>:</span> <span class=nb>Boolean</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>template</span><span class=o>:</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>    &lt;input
</span></span></span><span class=line><span class=cl><span class=sb>      type=&#34;checkbox&#34;
</span></span></span><span class=line><span class=cl><span class=sb>      v-bind:checked=&#34;checked&#34;
</span></span></span><span class=line><span class=cl><span class=sb>      v-on:change=&#34;$emit(&#39;change&#39;, $event.target.checked)&#34;
</span></span></span><span class=line><span class=cl><span class=sb>    &gt;`</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// 这样使用
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&lt;</span><span class=nx>base</span><span class=o>-</span><span class=nx>checkbox</span> <span class=nx>v</span><span class=o>-</span><span class=nx>model</span><span class=o>=</span><span class=s2>&#34;lovingVue&#34;</span><span class=o>&gt;&lt;</span><span class=err>/base-checkbox&gt;;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=props>props</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>props</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;likes&#39;</span><span class=p>,</span> <span class=s1>&#39;isPublished&#39;</span><span class=p>,</span> <span class=s1>&#39;commentIds&#39;</span><span class=p>,</span> <span class=s1>&#39;author&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 类型可以是：String、Number、Boolean、Array、Object、Date、Function、Symbol
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>title</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>likes</span><span class=o>:</span> <span class=nb>Number</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>isPublished</span><span class=o>:</span> <span class=nb>Boolean</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>commentIds</span><span class=o>:</span> <span class=nb>Array</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>author</span><span class=o>:</span> <span class=nb>Object</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>callback</span><span class=o>:</span> <span class=nb>Function</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>contactsPromise</span><span class=o>:</span> <span class=nb>Promise</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 基础的类型检查（null 和 undefined 会通过任何类型验证）
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>propA</span><span class=o>:</span> <span class=nb>Number</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 多个可能的类型
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>propB</span><span class=o>:</span> <span class=p>[</span><span class=nb>String</span><span class=p>,</span> <span class=nb>Number</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 必填的字符串
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>propC</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>required</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 带有默认值的数字
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>propD</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=nb>Number</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=k>default</span><span class=o>:</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 带有默认值的对象
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>propE</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=nb>Object</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 对象或数组默认值必须从一个工厂函数获取
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>default</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;hello&#39;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 自定义验证函数
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>propF</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>validator</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 这个值必须匹配下列字符串中的一个
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=p>[</span><span class=s1>&#39;success&#39;</span><span class=p>,</span> <span class=s1>&#39;warning&#39;</span><span class=p>,</span> <span class=s1>&#39;danger&#39;</span><span class=p>].</span><span class=nx>indexOf</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=o>!==</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=key>key</h2><ul><li>管理可复用元素；</li><li>表示元素是独立的，不要复用。</li></ul><p>举个例子：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- 
</span></span></span><span class=line><span class=cl><span class=c>  如果不设置独立的 key 属性，在切换 loginType 时，input 将被复用
</span></span></span><span class=line><span class=cl><span class=c>  用户已经输入的内容将不会被清除，很明显是不合理的
</span></span></span><span class=line><span class=cl><span class=c>--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span> <span class=na>v-if</span><span class=o>=</span><span class=s>&#34;loginType === &#39;username&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>label</span><span class=p>&gt;</span>UserName<span class=p>&lt;/</span><span class=nt>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>input</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;Enter your username&#34;</span> <span class=na>key</span><span class=o>=</span><span class=s>&#34;username&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span> <span class=na>v-else</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>label</span><span class=p>&gt;</span>Email<span class=p>&lt;/</span><span class=nt>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>input</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;Enter your email&#34;</span> <span class=na>key</span><span class=o>=</span><span class=s>&#34;email&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=is>is</h2><p>is 用来将普通元素或组件指定渲染为指定的组件。</p><p>有些 HTML 元素，诸如 &lt;ul>、&lt;ol>、&lt;table> 和 &lt;select>，对于哪些元素可以出现在其内部是有严格限制的；而有些元素，诸如 &lt;li>、&lt;tr> 和 &lt;option>，只能出现在其它某些特定的元素内部。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- 这个自定义组件 &lt;blog-post-row&gt; 会被作为无效的内容提升到外部，并导致最终渲染结果出错 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>table</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>blog-post-row</span><span class=p>&gt;&lt;/</span><span class=nt>blog-post-row</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 可以这样解决 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>table</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>tr</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;blog-post-row&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 通过将 currentTabComponent 设定为不同的组件来切换渲染结果--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>component</span> <span class=na>v-bind:is</span><span class=o>=</span><span class=s>&#34;currentTabComponent&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>component</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=slot>slot</h2><p>具名插槽：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- &lt;base-layout&gt; 组件 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;container&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>header</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>slot</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;header&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>slot</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>header</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>main</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>slot</span><span class=p>&gt;</span>后备用内容，name=&#34;default&#34;<span class=p>&lt;/</span><span class=nt>slot</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>main</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>footer</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>slot</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;footer&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>slot</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>footer</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 这样使用 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>base-layout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>template</span> <span class=na>v-slot:header</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>header 内容<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>这两行会被插入到 main 标签<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>这两行会被插入到 main 标签<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>template</span> <span class=na>v-slot:footer</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>footer 内容<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>base-layout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 缩写 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>base-layout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>header</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>header 内容<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>这两行会被插入到 main 标签<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>这两行会被插入到 main 标签<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>footer</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>footer 内容<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>base-layout</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>作用域插槽（让插槽内容能够访问子组件中才有的数据）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- &lt;current-user&gt; 组件 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- user 存在于 current-user 组件内作用域中--&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>slot</span><span class=p>&gt;</span>{{ user.lastName }}<span class=p>&lt;/</span><span class=nt>slot</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 在父组件中 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>current-user</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- 取不到 current-user 组件内作用域中的 user--&gt;</span>
</span></span><span class=line><span class=cl>  {{ user.firstName }}
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>current-user</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>为了让 user 在父级的插槽内容中可用，可以将 user 作为 &lt;slot> 元素的一个属性绑定上去：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- &lt;current-user&gt; 组件 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>slot</span> <span class=na>v-bind:user</span><span class=o>=</span><span class=s>&#34;user&#34;</span><span class=p>&gt;</span>{{ user.lastName }}<span class=p>&lt;/</span><span class=nt>slot</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 在父组件中 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>current-user</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>template</span> <span class=na>v-slot:default</span><span class=o>=</span><span class=s>&#34;slotProps&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    {{ slotProps.user.firstName }}
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>template</span> <span class=na>v-slot:one</span><span class=o>=</span><span class=s>&#34;oneSlotProps&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      slotProps is NOT available here
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>template</span> <span class=na>v-slot:two</span><span class=o>=</span><span class=s>&#34;twoSlotProps&#34;</span><span class=p>&gt;</span>slotProps is NOT available here<span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>current-user</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 也可以酱 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>current-user</span> <span class=na>v-slot</span><span class=o>=</span><span class=s>&#34;{ user }&#34;</span><span class=p>&gt;</span>{{ user.firstName }}<span class=p>&lt;/</span><span class=nt>current-user</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 也可以酱 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>current-user</span> <span class=na>v-slot</span><span class=o>=</span><span class=s>&#34;{ user: person }&#34;</span><span class=p>&gt;</span>{{ person.firstName }}<span class=p>&lt;/</span><span class=nt>current-user</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 还可以定义后备内容 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>current-user</span> <span class=na>v-slot</span><span class=o>=</span><span class=s>&#34;{ user = { firstName: &#39;Guest&#39; } }&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  {{ user.firstName }}
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>current-user</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=命名视图--滚动行为>命名视图 & 滚动行为</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>router-view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;view one&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>router-view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>router-view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;view two&#34;</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;a&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>router-view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>router-view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;view three&#34;</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;b&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>router-view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=k>new</span> <span class=nx>VueRouter</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>routes</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>components</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>default</span><span class=o>:</span> <span class=nx>Foo</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>a</span><span class=o>:</span> <span class=nx>Bar</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>b</span><span class=o>:</span> <span class=nx>Baz</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nx>scrollBehavior</span><span class=p>(</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>savedPosition</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// return 期望滚动到哪个的位置
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>if</span> <span class=p>(</span><span class=nx>savedPosition</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>savedPosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span> <span class=nx>x</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>y</span><span class=o>:</span> <span class=mi>0</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=路由组件传参>路由组件传参</h2><p>有一个 User 组件，对于所有 ID 不同的用户，都要使用这个组件来渲染；通常的做法是“动态路由匹配”或者“Query 参数”，在组件中使用 vm.$route 来获取参数；在组件中使用 $route 会使之与其对应路由形成高度耦合，从而使组件只能在某些特定的 URL 上使用，限制了其灵活性。</p><p>组件与 $route 的耦合：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=k>new</span> <span class=nx>Router</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>routes</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/user/:id&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;User&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>component</span><span class=o>:</span> <span class=nx>User</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;user&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>userId：{{$route.params.id}}<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>通过 props 与组件解耦：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 布尔模式
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>new</span> <span class=nx>Router</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>routes</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/user/:id&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;User&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>component</span><span class=o>:</span> <span class=nx>User</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>props</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 对象模式
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>new</span> <span class=nx>Router</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>routes</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/user&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;User&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>component</span><span class=o>:</span> <span class=nx>User</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>props</span><span class=o>:</span> <span class=p>{</span> <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 函数模式
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>new</span> <span class=nx>Router</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>routes</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/user&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;User&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>component</span><span class=o>:</span> <span class=nx>User</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=c1>// /user?id=123 会将 {query: &#39;123&#39;} 作为属性传递给 user 组件
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>props</span><span class=o>:</span> <span class=nx>route</span> <span class=p>=&gt;</span> <span class=p>({</span> <span class=nx>query</span><span class=o>:</span> <span class=nx>route</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>id</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;user&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>userId：{{id}}<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>props</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=路由钩子>路由钩子</h2><p>参数或查询的改变并不会触发进入/离开的导航守卫；可以通过观察 $route 对象来应对这些变化，或使用 beforeRouteUpdate 的组件内守卫。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>VueRouter</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>routes</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/foo&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>component</span><span class=o>:</span> <span class=nx>Foo</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 路由独享守卫
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>beforeEnter</span><span class=o>:</span> <span class=p>(</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>         * to:Route      即将要进入的目标路由
</span></span></span><span class=line><span class=cl><span class=cm>         * from:Route    当前导航正要离开的路由
</span></span></span><span class=line><span class=cl><span class=cm>         * next:Function 调用该方法来 resolve 这个钩子
</span></span></span><span class=line><span class=cl><span class=cm>         * next()
</span></span></span><span class=line><span class=cl><span class=cm>         *      进行管道中的下一个钩子
</span></span></span><span class=line><span class=cl><span class=cm>         * next(false)
</span></span></span><span class=line><span class=cl><span class=cm>         *      中断当前的导航
</span></span></span><span class=line><span class=cl><span class=cm>         * next(&#39;/&#39;) 或者 next({ path: &#39;/&#39; })
</span></span></span><span class=line><span class=cl><span class=cm>         *      当前的导航被中断，然后进行一个新的导航；可以向 next 传递任意位置对象，且允许设置诸如 replace: true、name: &#39;home&#39; 之类的选项
</span></span></span><span class=line><span class=cl><span class=cm>         * next(error)
</span></span></span><span class=line><span class=cl><span class=cm>         *      传入 Error 实例，导航会被终止且该错误会被传递给 router.onError
</span></span></span><span class=line><span class=cl><span class=cm>         */</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// 全局前置守卫
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>beforeEach</span><span class=p>((</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 参数含义同上
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// 全局解析守卫
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>beforeResolve</span><span class=p>((</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 参数含义同上，所有组件内守卫和异步路由组件被解析之后，解析守卫就被调用
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=c1>// 全局后置钩子
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>afterEach</span><span class=p>((</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 参数含义同上
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=k>new</span> <span class=nx>Vue</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 用来在导航完成前获取数据
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>beforeRouteEnter</span><span class=p>(</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 在渲染该组件的对应路由被 confirm 前调用
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 不！能！获取组件实例 this
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 守卫执行前，组件实例还没被创建
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>next</span><span class=p>(</span><span class=nx>vm</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 通过 vm 访问实例
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>beforeRouteUpdate</span><span class=p>(</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 在当前路由改变，但是该组件被复用时调用
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 组件实例会被复用；而这个钩子就会在这个情况下被调用。
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 可以访问组件实例 this
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>beforeRouteLeave</span><span class=p>(</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 导航离开该组件的对应路由时调用
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 可以访问组件实例 this
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>isBye</span> <span class=o>=</span> <span class=nb>window</span><span class=p>.</span><span class=nx>confirm</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>isBye</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>next</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>完整的导航解析流程：</p><ul><li>导航被触发；</li><li>在失活的组件里调用 beforeRouteLeave；</li><li>调用全局的 beforeEach；</li><li>在重用的组件里调用 beforeRouteUpdate；</li><li>在路由配置里调用 beforeEnter；</li><li>解析异步路由组件；</li><li>在被激活的组件里调用 beforeRouteEnter；</li><li>调用全局的 beforeResolve；</li><li>导航被确认；</li><li>调用全局的 afterEach；</li><li>触发 DOM 更新；</li><li>用创建好的实例调用 beforeRouteEnter 守卫中传给 next 的回调函数。</li></ul><h2 id=路由元信息>路由元信息</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>VueRouter</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>routes</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/foo&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>component</span><span class=o>:</span> <span class=nx>Foo</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>children</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>component</span><span class=o>:</span> <span class=nx>Bar</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>meta</span><span class=o>:</span> <span class=p>{</span> <span class=nx>requiresAuth</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>beforeEach</span><span class=p>((</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>to</span><span class=p>.</span><span class=nx>matched</span><span class=p>.</span><span class=nx>some</span><span class=p>(</span><span class=nx>v</span> <span class=p>=&gt;</span> <span class=nx>v</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>requiresAuth</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>auth</span><span class=p>.</span><span class=nx>loggedIn</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>next</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/login&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>query</span><span class=o>:</span> <span class=p>{</span> <span class=nx>redirect</span><span class=o>:</span> <span class=nx>to</span><span class=p>.</span><span class=nx>fullPath</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/vuerouter-2.x-%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/><div class=article-image><img src=/img/cover/vue.png loading=lazy data-key data-hash=/img/cover/vue.png></div><div class=article-details><h2 class=article-title>VueRouter 2.x 源码学习</h2></div></a></article><article class=has-image><a href=/p/vue-2.x/3.x-%E6%AF%94%E8%BE%83%E5%9F%BA%E4%BA%8E%E6%BA%90%E7%A0%81/><div class=article-image><img src=/img/cover/vue.png loading=lazy data-key data-hash=/img/cover/vue.png></div><div class=article-details><h2 class=article-title>Vue 2.x/3.x 比较（基于源码）</h2></div></a></article><article class=has-image><a href=/p/%E5%9F%BA%E4%BA%8E%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD%E7%9A%84-renderless-%E7%BB%84%E4%BB%B6/><div class=article-image><img src=/img/cover/vue.png loading=lazy data-key data-hash=/img/cover/vue.png></div><div class=article-details><h2 class=article-title>基于作用域插槽的 Renderless 组件</h2></div></a></article><article class=has-image><a href=/p/vue-composition-api/><div class=article-image><img src=/img/cover/vue.png loading=lazy data-key data-hash=/img/cover/vue.png></div><div class=article-details><h2 class=article-title>Vue Composition API</h2></div></a></article><article class=has-image><a href=/p/vue-3.0-%E6%9D%A5%E4%BA%86/><div class=article-image><img src=/img/cover/vue.png loading=lazy data-key data-hash=/img/cover/vue.png></div><div class=article-details><h2 class=article-title>Vue 3.0 来了</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2017 -
2024
<a href=https://github.com/Vikingama target=_blank>馬腊咯稽</a></section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a>, Deploy by Actions<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.13.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#生命周期>生命周期</a></li><li><a href=#异步组件>异步组件</a></li><li><a href=#插件系统>插件系统</a></li><li><a href=#自定义指令>自定义指令</a></li><li><a href=#响应式原理>响应式原理</a></li><li><a href=#依赖注入>依赖注入</a></li><li><a href=#事件监听器>事件监听器</a></li><li><a href=#混入>混入</a></li><li><a href=#computed-vs-watch-vs-methods>computed vs watch vs methods</a></li><li><a href=#v-model>v-model</a></li><li><a href=#props>props</a></li><li><a href=#key>key</a></li><li><a href=#is>is</a></li><li><a href=#slot>slot</a></li><li><a href=#命名视图--滚动行为>命名视图 & 滚动行为</a></li><li><a href=#路由组件传参>路由组件传参</a></li><li><a href=#路由钩子>路由钩子</a></li><li><a href=#路由元信息>路由元信息</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script></body></html>